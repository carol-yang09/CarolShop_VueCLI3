(function(t){function e(e){for(var a,o,s=e[0],i=e[1],u=e[2],d=0,f=[];d<s.length;d++)o=s[d],c[o]&&f.push(c[o][0]),c[o]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a]);h&&h(e);while(f.length)f.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,o=1;o<n.length;o++){var s=n[o];0!==c[s]&&(a=!1)}a&&(r.splice(e--,1),t=i(i.s=n[0]))}return t}var a={},o={app:0},c={app:0},r=[];function s(t){return i.p+"js/"+({}[t]||t)+"."+{"chunk-37c34db0":"04bc17d8","chunk-482bc5d4":"5bea961d","chunk-4e35857c":"d8ed4110","chunk-4f98ea13":"c656d974","chunk-50d531c7":"be7f8936","chunk-54167844":"c487a218","chunk-55460745":"f0fc362d","chunk-6b5086cd":"22b93092","chunk-95c8acf4":"d41ae495","chunk-bca3177e":"3ddc835f","chunk-d1774b0c":"6b1a5fa2"}[t]+".js"}function i(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(t){var e=[],n={"chunk-37c34db0":1,"chunk-482bc5d4":1,"chunk-4e35857c":1,"chunk-4f98ea13":1,"chunk-50d531c7":1,"chunk-54167844":1,"chunk-55460745":1,"chunk-6b5086cd":1,"chunk-95c8acf4":1,"chunk-bca3177e":1,"chunk-d1774b0c":1};o[t]?e.push(o[t]):0!==o[t]&&n[t]&&e.push(o[t]=new Promise(function(e,n){for(var a="css/"+({}[t]||t)+"."+{"chunk-37c34db0":"9e10a01d","chunk-482bc5d4":"5c2cd30d","chunk-4e35857c":"6454c7a4","chunk-4f98ea13":"bbc3ecca","chunk-50d531c7":"62f672ec","chunk-54167844":"ba37128f","chunk-55460745":"a4146ba4","chunk-6b5086cd":"338e70eb","chunk-95c8acf4":"6b40c96f","chunk-bca3177e":"b58d6846","chunk-d1774b0c":"5a0ee9b9"}[t]+".css",c=i.p+a,r=document.getElementsByTagName("link"),s=0;s<r.length;s++){var u=r[s],d=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(d===a||d===c))return e()}var f=document.getElementsByTagName("style");for(s=0;s<f.length;s++){u=f[s],d=u.getAttribute("data-href");if(d===a||d===c)return e()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=e,h.onerror=function(e){var a=e&&e.target&&e.target.src||c,r=new Error("Loading CSS chunk "+t+" failed.\n("+a+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=a,delete o[t],h.parentNode.removeChild(h),n(r)},h.href=c;var l=document.getElementsByTagName("head")[0];l.appendChild(h)}).then(function(){o[t]=0}));var a=c[t];if(0!==a)if(a)e.push(a[2]);else{var r=new Promise(function(e,n){a=c[t]=[e,n]});e.push(a[2]=r);var u,d=document.createElement("script");d.charset="utf-8",d.timeout=120,i.nc&&d.setAttribute("nonce",i.nc),d.src=s(t),u=function(e){d.onerror=d.onload=null,clearTimeout(f);var n=c[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src,r=new Error("Loading chunk "+t+" failed.\n("+a+": "+o+")");r.type=a,r.request=o,n[1](r)}c[t]=void 0}};var f=setTimeout(function(){u({type:"timeout",target:d})},12e4);d.onerror=d.onload=u,document.head.appendChild(d)}return Promise.all(e)},i.m=t,i.c=a,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/CarolShop_VueCLI3/dist/",i.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],d=u.push.bind(u);u.push=e,u=u.slice();for(var f=0;f<u.length;f++)e(u[f]);var h=d;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),o=n("2f62"),c=n("bc3a"),r=n.n(c),s=n("a7fe"),i=n.n(s),u=n("9062"),d=n.n(u),f=(n("e40d"),n("4989"),n("7bb1")),h=n("427f"),l=n.n(h),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},m=[],g={name:"App"},v=g,b=(n("5c0b"),n("2877")),k=Object(b["a"])(v,p,m,!1,null,null,null),S=k.exports,E=n("8c4f");a["a"].use(E["a"]);var M=new E["a"]({linkExactActiveClass:"active",routes:[{path:"*",redirect:"/"},{path:"/login",name:"login",component:function(){return n.e("chunk-482bc5d4").then(n.bind(null,"a55b"))}},{path:"/admin",component:function(){return n.e("chunk-6b5086cd").then(n.bind(null,"7277"))},children:[{path:"productsmanage",name:"ProductsManage",component:function(){return n.e("chunk-bca3177e").then(n.bind(null,"9226"))},meta:{requiresAuth:!0}},{path:"couponsmanage",name:"CouponsManage",component:function(){return n.e("chunk-4f98ea13").then(n.bind(null,"1d67"))},meta:{requiresAuth:!0}},{path:"ordersmanage",name:"OrdersManage",component:function(){return n.e("chunk-54167844").then(n.bind(null,"5714"))},meta:{requiresAuth:!0}}]},{path:"/",component:function(){return n.e("chunk-50d531c7").then(n.bind(null,"88e9"))},children:[{path:"/",name:"Home",component:function(){return n.e("chunk-37c34db0").then(n.bind(null,"a685"))}},{path:"productslist",name:"ProductsList",component:function(){return n.e("chunk-95c8acf4").then(n.bind(null,"4cdc"))}},{path:"productslist/:productId",name:"Product",component:function(){return n.e("chunk-55460745").then(n.bind(null,"3c46"))}},{path:"coupongame",name:"CouponGame",component:function(){return n.e("chunk-d1774b0c").then(n.bind(null,"6313"))}},{path:"createorder",name:"CreateOrder",component:function(){return n.e("chunk-4e35857c").then(n.bind(null,"1eae"))}}]}]}),O=(n("ac6a"),{namespaced:!0,state:{products:[]},actions:{getProducts:function(t,e){var n,a=e.isPagination,o=e.page;n=a?"".concat("https://vue-course-api.hexschool.io","/api/").concat("carol","/admin/products?page=").concat(o):"".concat("https://vue-course-api.hexschool.io","/api/").concat("carol","/products/all"),t.commit("LOADING",!0,{root:!0}),r.a.get(n).then(function(e){e.data.success?(t.commit("PRODUCTS",e.data.products),a&&t.commit("PAGINATION",e.data.pagination,{root:!0}),t.rootState.favoriteModules.favoritesLength&&t.state.products.forEach(function(e,n){t.rootState.favoriteModules.favorites.forEach(function(a){e.id===a.id&&t.commit("UPDATEPRODUCTS",{index:n,isFavorite:!0})})})):t.dispatch("alertMessageModules/updateMessage",{message:e.data.message,status:"danger"},{root:!0}),t.commit("LOADING",!1,{root:!0})})}},mutations:{PRODUCTS:function(t,e){t.products=e},UPDATEPRODUCTS:function(t,e){var n=e.index,o=e.isFavorite;a["a"].set(t.products[n],"is_favorite",o)}},getters:{products:function(t){return t.products}}}),A={namespaced:!0,state:{carts:{},cartsLength:0,isCartShow:!1},actions:{getCart:function(t){var e="".concat("https://vue-course-api.hexschool.io","/api/").concat("carol","/cart");r.a.get(e).then(function(e){t.commit("CART",e.data.data),t.commit("CART_LENGTH",e.data.data.carts.length)})},addToCart:function(t,e){var n=e.id,a=e.qty,o="".concat("https://vue-course-api.hexschool.io","/api/").concat("carol","/cart"),c={product_id:n,qty:a};t.commit("LOADING",!0,{root:!0}),r.a.post(o,{data:c}).then(function(e){t.dispatch("getCart"),e.data.success?(t.dispatch("showCart"),t.dispatch("alertMessageModules/updateMessage",{message:e.data.message,status:"success"},{root:!0})):t.dispatch("alertMessageModules/updateMessage",{message:e.data.message,status:"danger"},{root:!0}),t.commit("LOADING",!1,{root:!0})})},removeCartItem:function(t,e){var n="".concat("https://vue-course-api.hexschool.io","/api/").concat("carol","/cart/").concat(e);t.commit("LOADING",!0,{root:!0}),r.a.delete(n).then(function(e){t.dispatch("getCart"),t.dispatch("alertMessageModules/updateMessage",{message:e.data.message,status:"warning"},{root:!0}),t.commit("LOADING",!1,{root:!0})})},showCart:function(t){t.commit("ISCART_SHOW",!0),setTimeout(function(){t.commit("ISCART_SHOW",!1)},5e3)}},mutations:{CART:function(t,e){t.carts=e},CART_LENGTH:function(t,e){t.cartsLength=e},ISCART_SHOW:function(t,e){t.isCartShow=e}},getters:{carts:function(t){return t.carts},cartsLength:function(t){return t.cartsLength},isCartShow:function(t){return t.isCartShow}}},T=n("75fc"),C={namespaced:!0,state:{messages:[]},actions:{updateMessage:function(t,e){var n=e.message,a=e.status,o=Math.floor(new Date/1e3);t.commit("PUSH_MESSAGE",{message:n,status:a,timestamp:o}),t.dispatch("removeMessageWithTiming",o)},removeMessage:function(t){t.commit("REMOVE_MESSAGE")},removeMessageWithTiming:function(t,e){var n=Object(T["a"])(t.state.messages);setTimeout(function(){n.forEach(function(n,a){n.timestamp===e&&t.commit("REMOVE_MESSAGE",a)})},1500)}},mutations:{PUSH_MESSAGE:function(t,e){t.messages.push(e)},REMOVE_MESSAGE:function(t,e){t.messages.splice(e,1)}},getters:{messages:function(t){return t.messages}}},L={namespaced:!0,state:{favorites:{},favoritesLength:0},actions:{getFavorite:function(t){var e=JSON.parse(localStorage.getItem("favoriteData"))||[];t.commit("FAVORITES",e),t.commit("FAVORITES_LENGTH",e.length),t.dispatch("productsModules/getProducts",{isPagination:!1},{root:!0})},addToFavorite:function(t,e){var n={id:e.id,title:e.title};t.commit("PUSH_FAVORITE",n),localStorage.setItem("favoriteData",JSON.stringify(t.state.favorites)),t.dispatch("getFavorite"),t.dispatch("alertMessageModules/updateMessage",{message:"已加入我的最愛",status:"success"},{root:!0})},removeFavorite:function(t,e){var n=e.favoriteItem,a=e.delall;a?localStorage.removeItem("favoriteData"):(t.commit("REMOVE_FAVORITE",n),localStorage.setItem("favoriteData",JSON.stringify(t.state.favorites))),t.dispatch("getFavorite"),t.dispatch("alertMessageModules/updateMessage",{message:"已刪除我的最愛",status:"warning"},{root:!0})}},mutations:{FAVORITES:function(t,e){t.favorites=e},FAVORITES_LENGTH:function(t,e){t.favoritesLength=e},PUSH_FAVORITE:function(t,e){t.favorites.push(e)},REMOVE_FAVORITE:function(t,e){t.favorites.forEach(function(n,a){n.id===e.id&&t.favorites.splice(a,1)})}},getters:{favorites:function(t){return t.favorites},favoritesLength:function(t){return t.favoritesLength}}};a["a"].use(o["a"]);var y=new o["a"].Store({strict:!0,state:{isLoading:!1,pagination:{}},actions:{updateLoading:function(t,e){t.commit("LOADING",e)}},mutations:{LOADING:function(t,e){t.isLoading=e},PAGINATION:function(t,e){t.pagination=e}},getters:{isLoading:function(t){return t.isLoading},pagination:function(t){return t.pagination}},modules:{productsModules:O,cartModules:A,alertMessageModules:C,favoriteModules:L}});a["a"].prototype.$bus=new a["a"];n("a481"),n("c5f6");var I=function(t){var e=Number(t);return"$".concat(e.toFixed(0).replace(/./g,function(t,e,n){var a=e&&"."!==t&&(n.length-e)%3===0?", ".concat(t).replace(/\s/g,""):t;return a}))},_=function(t){var e=new Date(1e3*t);return e.toLocaleDateString()};a["a"].config.productionTip=!1,a["a"].use(i.a,r.a),a["a"].use(o["a"]),f["a"].Validator.localize("zh_TW",l.a),a["a"].use(f["a"],{locale:"zh_TW"}),a["a"].component("Loading",d.a),a["a"].filter("currency",I),a["a"].filter("date",_),r.a.defaults.withCredentials=!0,new a["a"]({router:M,store:y,render:function(t){return t(S)}}).$mount("#app"),M.beforeEach(function(t,e,n){if(t.meta.requiresAuth){var a="".concat("https://vue-course-api.hexschool.io","/api/user/check");r.a.post(a).then(function(t){t.data.success?n():n({path:"/login"})})}else n()})},"5c0b":function(t,e,n){"use strict";var a=n("5e27"),o=n.n(a);o.a},"5e27":function(t,e,n){}});
//# sourceMappingURL=app.817effbc.js.map