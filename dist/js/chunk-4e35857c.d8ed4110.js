(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e35857c"],{"0ecc":function(t,e,s){},"1eae":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("ul",{staticClass:"mb-4 step"},[s("li",{staticClass:"bg-light",class:{"bg-dark text-light active":1===t.step}},[s("strong",[t._v("STEP")]),t._m(0),s("p",{staticClass:"h6"},[t._v("確認購物清單")])]),s("li",{staticClass:"bg-light",class:{"bg-dark text-light active":2===t.step}},[s("strong",[t._v("STEP")]),t._m(1),s("p",{staticClass:"h6"},[t._v("填寫訂購資料")])]),s("li",{staticClass:"bg-light",class:{"bg-dark text-light active":3===t.step}},[s("strong",[t._v("STEP")]),t._m(2),s("p",{staticClass:"h6"},[t._v("付款/完成訂單")])])]),1===t.step?s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table mb-4"},[t._m(3),s("tbody",t._l(t.carts.carts,function(e){return s("tr",{key:e.id},[s("td",{staticClass:"d-md-table-cell d-none text-center"},[s("div",{staticClass:"thumbnail",style:{backgroundImage:"url("+e.product.imageUrl+")"}})]),s("td",[t._v("\n            "+t._s(e.product.title)+"\n            "),e.coupon?s("div",{staticClass:"text-success mt-2"},[t._v("\n              已套用折價卷 - ["+t._s(e.coupon.code)+"]\n            ")]):t._e()]),s("td",{staticClass:"d-sm-table-cell d-none text-center"},[t._v("\n            "+t._s(e.qty)+" / "+t._s(e.product.unit)+"\n          ")]),s("td",{staticClass:"text-right"},[e.coupon?s("div",[s("del",[t._v(t._s(t._f("currency")(e.total)))]),s("div",{staticClass:"text-success mt-2"},[t._v("\n                "+t._s(t._f("currency")(e.final_total))+"\n              ")])]):s("div",[t._v("\n              "+t._s(t._f("currency")(e.total))+"\n            ")])]),s("td",{staticClass:"text-center"},[s("a",{staticClass:"text-danger",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.removeCartItem(e.id)}}},[s("i",{staticClass:"fas fa-trash-alt"})])])])}),0),s("tfoot",{staticClass:"bg-light table-borderless border-top"},[s("tr",[s("td",{staticClass:"d-md-table-cell d-none"}),s("td",{staticClass:"d-sm-table-cell d-none"}),s("td",{staticClass:"text-right"},[t._v("\n            共 "+t._s(t.cartsLength)+" 件\n          ")]),s("td",{staticClass:"text-right"},[t._v("\n            運費\n          ")]),s("td",{staticClass:"text-right"},[t._v("\n            $0\n          ")])]),s("tr",[s("td",{staticClass:"d-md-table-cell d-none"}),s("td",{staticClass:"d-sm-table-cell d-none"}),s("td",{staticClass:"text-right",attrs:{colspan:"2"}},[t._v("\n            總計\n          ")]),s("td",{staticClass:"text-right"},[t._v("\n            "+t._s(t._f("currency")(t.carts.total))+"\n          ")])]),t.carts.total!==t.carts.final_total?s("tr",{staticClass:"text-success"},[s("td",{staticClass:"d-md-table-cell d-none"}),s("td",{staticClass:"d-sm-table-cell d-none"}),s("td",{staticClass:"text-right",attrs:{colspan:"2"}},[t._v("\n            折扣後金額\n          ")]),s("td",{staticClass:"text-right"},[t._v("\n            "+t._s(t._f("currency")(t.carts.final_total))+"\n          ")])]):t._e()])]),s("div",{staticClass:"input-group mb-4"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.couponCode,expression:"couponCode"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入折價卷代碼"},domProps:{value:t.couponCode},on:{input:function(e){e.target.composing||(t.couponCode=e.target.value)}}}),s("div",{staticClass:"input-group-append",on:{click:function(e){return e.preventDefault(),t.addCouponCode(e)}}},[s("button",{staticClass:"btn btn-success",attrs:{type:"button"}},[t._v("套用折價卷")])])]),s("div",{staticClass:"mb-4 stepBtn"},[s("router-link",{staticClass:"btn btn-secondary",attrs:{to:"/productslist"}},[s("i",{staticClass:"fas fa-arrow-left"}),t._v("\n        繼續購買\n      ")]),s("a",{staticClass:"btn btn-danger d-inline-block",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.step=2}}},[t._v("\n        下一步，填寫訂購資料\n        "),s("i",{staticClass:"fas fa-arrow-right"})])],1)]):t._e(),2===t.step?s("div",{staticClass:"mb-4"},[s("div",{attrs:{id:"accordion"}},[s("div",{staticClass:"card mb-4"},[t._m(4),s("div",{staticClass:"collapse",attrs:{id:"collapseOne","aria-labelledby":"headingOne","data-parent":"#accordion"}},[s("div",{staticClass:"card-body"},[s("table",{staticClass:"table mb-0"},[t._m(5),s("tbody",t._l(t.carts.carts,function(e){return s("tr",{key:e.id},[s("td",[t._v(t._s(e.product.title))]),s("td",[t._v(t._s(e.qty)+" / "+t._s(e.product.unit))]),s("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(e.final_total)))])])}),0),s("tfoot",[s("tr",[s("td"),s("td",[t._v("總計")]),s("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(t.carts.final_total)))])])])])])])])]),s("div",[s("h5",{staticClass:"text-center"},[t._v("訂購資料")]),s("form",{on:{submit:function(e){return e.preventDefault(),t.createOrder(e)}}},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"email"}},[t._v("Email")]),s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"},{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"}],staticClass:"form-control",class:{"is-invalid":t.errors.first("email")},attrs:{type:"email",name:"email",id:"email",placeholder:"請輸入 Email"},domProps:{value:t.form.user.email},on:{input:function(e){e.target.composing||t.$set(t.form.user,"email",e.target.value)}}}),t.errors.first("email")?s("span",{staticClass:"text-danger"},[t._v("\n            "+t._s(t.errors.first("email"))+"\n          ")]):t._e()]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"name"}},[t._v("收件人姓名")]),s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("name")},attrs:{type:"text",name:"name",id:"name",placeholder:"請輸入收件人姓名"},domProps:{value:t.form.user.name},on:{input:function(e){e.target.composing||t.$set(t.form.user,"name",e.target.value)}}}),t.errors.has("name")?s("span",{staticClass:"text-danger"},[t._v("姓名欄位不得留空")]):t._e()]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"tel"}},[t._v("收件人電話")]),s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("tel")},attrs:{type:"tel",name:"tel",id:"tel",placeholder:"請輸入收寄人電話"},domProps:{value:t.form.user.tel},on:{input:function(e){e.target.composing||t.$set(t.form.user,"tel",e.target.value)}}}),t.errors.has("tel")?s("span",{staticClass:"text-danger"},[t._v("電話欄位不得留空")]):t._e()]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"address"}},[t._v("收件人地址")]),s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("address")},attrs:{type:"text",name:"address",id:"address",placeholder:"請輸入收件人地址"},domProps:{value:t.form.user.address},on:{input:function(e){e.target.composing||t.$set(t.form.user,"address",e.target.value)}}}),t.errors.has("address")?s("span",{staticClass:"text-danger"},[t._v("地址欄位不得留空")]):t._e()]),s("div",{staticClass:"form-group mb-4"},[s("label",{attrs:{for:"message"}},[t._v("留言")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{name:"message",id:"message",cols:"20",rows:"5"},domProps:{value:t.form.message},on:{input:function(e){e.target.composing||t.$set(t.form,"message",e.target.value)}}})]),s("div",{staticClass:"stepBtn"},[s("a",{staticClass:"btn btn-success",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.step=1}}},[s("i",{staticClass:"fas fa-arrow-left"}),t._v("\n            回上一步\n          ")]),t._m(6)])])])]):t._e(),3===t.step?s("div",{staticClass:"mb-4"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.payOrder(e)}}},[s("table",{staticClass:"table mb-3"},[t._m(7),s("tbody",t._l(t.order.products,function(e){return s("tr",{key:e.id},[s("td",[t._v(t._s(e.product.title))]),s("td",[t._v(t._s(e.qty)+" / "+t._s(e.product.unit))]),s("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(e.total)))])])}),0),s("tfoot",[s("tr",{staticClass:"text-success"},[s("td"),s("td",[t._v("總計")]),s("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(t.order.total)))])])])]),s("table",{staticClass:"table mb-3"},[s("tr",[s("th",{attrs:{width:"150"}},[t._v("訂購人Email")]),s("td",[t._v(t._s(t.order.user.email))])]),s("tr",[s("th",[t._v("訂購人姓名")]),s("td",[t._v(t._s(t.order.user.name))])]),s("tr",[s("th",[t._v("訂購人電話")]),s("td",[t._v(t._s(t.order.user.tel))])]),s("tr",[s("th",[t._v("留言")]),s("td",[t._v(t._s(t.order.user.message))])]),s("tr",[s("th",[t._v("付款狀態")]),t.order.is_paid?s("td",{staticClass:"text-success"},[t._v("付款成功")]):s("td",[t._v("尚未付款")])])]),t.order.is_paid?t._e():s("div",{staticClass:"text-right"},[s("button",{staticClass:"btn btn-danger"},[t._v("確認付款去")])])])]):t._e()])},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h3",[s("strong",[t._v("01")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h3",[s("strong",[t._v("02")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h3",[s("strong",[t._v("03")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{staticClass:"d-md-table-cell d-none text-center",attrs:{width:"20%"}},[t._v("縮圖")]),s("th",{staticClass:"text-center"},[t._v("商品名稱")]),s("th",{staticClass:"d-sm-table-cell d-none text-center",attrs:{width:"20%"}},[t._v("數量")]),s("th",{staticClass:"text-center",attrs:{width:"15%"}},[t._v("價格")]),s("th",{staticClass:"text-center",attrs:{width:"15%"}},[t._v("刪除")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-header",attrs:{id:"headingOne"}},[s("h5",{staticClass:"mb-0"},[s("button",{staticClass:"btn btn-link",attrs:{"data-toggle":"collapse","data-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne"}},[t._v("\n              購物車清單 "),s("i",{staticClass:"fas fa-caret-down"})])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("td",[t._v("商品")]),s("td",{attrs:{width:"25%"}},[t._v("數量")]),s("td",{attrs:{width:"15%"}},[t._v("價格")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"btn btn-danger float-right"},[t._v("\n            確認訂購 "),s("i",{staticClass:"fas fa-arrow-right"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("商品")]),s("th",{attrs:{width:"25%"}},[t._v("數量")]),s("th",{attrs:{width:"15%"}},[t._v("價格")])])])}],n=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),c=s("2f62");function o(t,e){var s=Object.keys(t);return Object.getOwnPropertySymbols&&s.push.apply(s,Object.getOwnPropertySymbols(t)),e&&(s=s.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s}function i(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(s,!0).forEach(function(e){Object(n["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var l={data:function(){return{step:1,couponCode:"",form:{user:{name:"",email:"",tel:"",address:""},message:""},orderId:"",order:{user:{email:"",name:"",tel:"",address:""}}}},computed:i({},Object(c["c"])("cartModules",["carts","cartsLength"])),methods:i({removeCartItem:function(t){this.$store.dispatch("cartModules/removeCartItem",t)},addCouponCode:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("carol","/coupon"),s={code:t.couponCode};t.$http.post(e,{data:s}).then(function(e){e.data.success?(t.$store.dispatch("cartModules/getCart"),t.$store.dispatch("alertMessageModules/updateMessage",{message:e.data.message,status:"success"})):t.$store.dispatch("alertMessageModules/updateMessage",{message:e.data.message,status:"danger"})})},createOrder:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("carol","/order"),s=t.form;t.$validator.validate().then(function(a){a?t.$http.post(e,{data:s}).then(function(e){t.orderId=e.data.orderId,t.getOrder(),t.step=3}):t.$store.dispatch("alertMessageModules/updateMessage",{message:"欄位不完整",status:"danger"})})},getOrder:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("carol","/order/").concat(t.orderId);t.$http.get(e).then(function(e){t.order=e.data.order})},payOrder:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("carol","/pay/").concat(t.orderId);t.$http.post(e).then(function(e){e.data.success?(t.$store.dispatch("alertMessageModules/updateMessage",{message:e.data.message,status:"success"}),t.getOrder()):t.$store.dispatch("alertMessageModules/updateMessage",{message:e.data.message,status:"danger"})})}},Object(c["b"])("cartModules",["getCart"])),created:function(){this.$store.dispatch("cartModules/getCart")}},d=l,u=(s("d6ce"),s("2877")),v=Object(u["a"])(d,a,r,!1,null,"300a8859",null);e["default"]=v.exports},"454f":function(t,e,s){s("46a7");var a=s("584a").Object;t.exports=function(t,e,s){return a.defineProperty(t,e,s)}},"456d":function(t,e,s){var a=s("4bf8"),r=s("0d58");s("5eda")("keys",function(){return function(t){return r(a(t))}})},"46a7":function(t,e,s){var a=s("63b6");a(a.S+a.F*!s("8e60"),"Object",{defineProperty:s("d9f6").f})},"5eda":function(t,e,s){var a=s("5ca1"),r=s("8378"),n=s("79e5");t.exports=function(t,e){var s=(r.Object||{})[t]||Object[t],c={};c[t]=e(s),a(a.S+a.F*n(function(){s(1)}),"Object",c)}},"85f2":function(t,e,s){t.exports=s("454f")},"8e6e":function(t,e,s){var a=s("5ca1"),r=s("990b"),n=s("6821"),c=s("11e9"),o=s("f1ae");a(a.S,"Object",{getOwnPropertyDescriptors:function(t){var e,s,a=n(t),i=c.f,l=r(a),d={},u=0;while(l.length>u)s=i(a,e=l[u++]),void 0!==s&&o(d,e,s);return d}})},"990b":function(t,e,s){var a=s("9093"),r=s("2621"),n=s("cb7c"),c=s("7726").Reflect;t.exports=c&&c.ownKeys||function(t){var e=a.f(n(t)),s=r.f;return s?e.concat(s(t)):e}},bd86:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var a=s("85f2"),r=s.n(a);function n(t,e,s){return e in t?r()(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}},d6ce:function(t,e,s){"use strict";var a=s("0ecc"),r=s.n(a);r.a},f1ae:function(t,e,s){"use strict";var a=s("86cc"),r=s("4630");t.exports=function(t,e,s){e in t?a.f(t,e,r(0,s)):t[e]=s}}}]);
//# sourceMappingURL=chunk-4e35857c.d8ed4110.js.map